{{- if .Values.global.podPriorityClass.enabled -}}
apiVersion: scheduling.k8s.io/v1beta1
kind: PriorityClass

metadata:
  name: {{ template "pgpool.priorityClassName" . }}
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "commonLabels" . | nindent 4 }}

{{- if .Values.pgpool.podPriorityClass }}
{{- if .Values.pgpool.podPriorityClass.spec }}
{{- toYaml .Values.pgpool.podPriorityClass.spec | nindent 0 }}
{{- else }}
# INFO: default podPriorityClass
globalDefault: false
value: 30000
preemptionPolicy: PreemptLowerPriority
description: "Specific priority for {{ template "pgpool.podName" . }} with preemption"
{{- end -}}
{{- end -}}
{{- end -}}
